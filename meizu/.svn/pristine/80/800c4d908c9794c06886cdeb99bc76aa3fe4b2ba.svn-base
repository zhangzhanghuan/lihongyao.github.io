
require("../less/common.less");
import './common';
require('../less/community.less');

import Swiper from '../../node_modules/swiper/dist/js/swiper.min.js';

$(function(){

    var mySwiper = new Swiper ('.swiper-container', {
        direction: 'horizontal', // 垂直切换选项
        loop: true, // 循环模式选项
        grabCursor : true,//手掌
        parallax : true,
        zoom:true,
        speed:3000,
        autoplay:true,
        initialSlide :2,
        
        
        // 如果需要分页器
        pagination: {
          el: '.swiper-pagination',
          // clickable: true,
        },
        
        // 如果需要前进后退按钮
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        
        // 如果需要滚动条
        // scrollbar: {
        //   el: '.swiper-scrollbar',
        // },
        a11y : {
            prevSlideMessage: 'Previous slide',
            nextSlideMessage: 'Next slide',
            firstSlideMessage: 'This is the first slide',
            lastSlideMessage: 'This is the last slide',
            paginationBulletMessage: 'Go to slide {{index}}',
            notificationClass: 'swiper-notification',
          },
          slidesPerView : 1,
          lazy: {
            loadPrevNext: true,
          },
        //   effect : '',
        //   slidesPerView: 1,
        //   centeredSlides: true,


      });
     

      
    //如果你在swiper初始化后才决定使用clickable，可以这样设置
    mySwiper.params.pagination.clickable = true ;
    //此外还需要重新初始化pagination
    mySwiper.pagination.destroy()
    mySwiper.pagination.init()
    mySwiper.pagination.bullets.eq(0).addClass('swiper-pagination-bullet-active');
    $('.show-box').mouseenter(function(){
        $('.box').slideDown();
        $('.san').show(0.1);
    });
    $('.last').mouseleave(function(){
        $('.box').hide();
    });
    $('.ban-main').mouseenter(function(){
        $('.ban').css('display',"block");
    });
    $('.ban-li').mouseleave(function(){
        $('.ban').hide();
    });
    $('.img').mouseenter(function(){
        $('.hide-img').css('display',"block");
    });
    $('.hide-img').mouseleave(function(){
        $(this).hide();
    });

    // 加载发帖数据
    $.ajax({
        url:"../json/community.json",
        type:"GET",
        success:function(data1){
            console.log(data1);
            var lis="";
            lis +=`<li class="person-li">
            <a>${data1.title}</a>
            <span class="person-li-li">
            <a class="odd">${data1.today}</a>
            <a>${data1.num1}</a>
            <a class="odd">${data1.history}</a>
            <a>${data1.num2}</a>
            <a class="odd">${data1.VIP}</a>
            <a>${data1.num3}</a>
            </span>
            
            </li>`
            data1.list2.forEach(data2 => {
                lis+=`
                <li class="person-li-1">
                <span class="person-li-1-img"><img src="${data2.img}"></span>
                <span class="span-two">
                
               <p class="span-p"><a>${data2.say}<a></p>
                
               <span class="span-p1">
                    <p class="username">${data2.name}</p>
                

                    <span class="info-left">
                    <i class="iconfont">&#xe629;</i>
                    <p class="p1">${data2.num1}</p>
                    </span>

                    <span class="info-left">
                    <i class="iconfont">&#xe601;</i>
                    <p  class="p1">${data2.news}</p>
                    </span>
                </span>
                </span>
                </li>
                
                `
            });
            $('.person').html(lis);
        }
    })
    
})