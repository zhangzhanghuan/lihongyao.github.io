require('../less/common.less');
require('../less/goods.less');
import {
    loaddingKeywordsList,
    loaddingGoodsList,
    scroll,
    tabChange,
    hasStock,
    keywordsClick,
} from './goods-func';

// 禁止热更新刷新页面
if (module.hot) {
    module.hot.accept();
}

$(function () {

     /****************************** 商品数据处理 ***************************/
    function getAjax(url, $box) {
        $.ajax({
            url: url,
            success: (function (response) {
                // 加载商品信息到HTML页面
                loaddingGoodsList(response, $box);
                // 增加商品图片按钮两侧前进后退箭头
                scroll();
                // 点击图片按钮切换不同颜色商品
                tabChange();
                // 只显示有货商品
                hasStock();
            })
        });
    }
    getAjax('../json/phone.json', $('.goods-list-phone'));
    getAjax('../json/media.json', $('.goods-list-media'));
    getAjax('../json/smart.json', $('.goods-list-smart'));
    getAjax('../json/life.json', $('.goods-list-life'));
    getAjax('../json/others.json', $('.goods-list-others'));

    /**************************** 过滤关键词数据处理 ************************/
    $.ajax({
        url: '../json/keywords.json',
        success: (function (response) {
            // 加载关键字信息到HTML页面
            loaddingKeywordsList(response, 0);
            // 点击切换关键字
            keywordsClick(response);
            // 点击切换为全部图片和初始关键字
            $('.goods-all').on('click', function(){
                $('.goods-show').show();
                loaddingKeywordsList(response, 0);
                keywordsClick(response);
            });
        })
    });





























});
