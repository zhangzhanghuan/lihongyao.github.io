// 头部
$.ajax({
    url:"../json/common.json",
    success:function(response){
        menuList=$(".ul-list");
        let htmlArr = [];
        let str=["goods","media","smart","life","","server","shop","community","down"];
    response.header.forEach(function(menuItem,index) {
        htmlArr.push(`
            <li class="menu-item">
                <a class="menu-item-title" href="${str[index]+".html"}">${menuItem.title}</a>
                ${(function(){
                    if(menuItem.contentList) {
                        var menuItemContentStr = `<div class="hid"><ul class="menu-item-content">`;
                        menuItem.contentList.forEach(function(obj) {
                            menuItemContentStr += `
                                <li>
                                    <img src="${obj.colorImg[0]}">
                                    <p class="name">${obj.name?obj.name:""}</p>
                                    <p class="price">${obj.price?"￥"+obj.price:""}</p>
                                </li>
                            `;
                        });
                        menuItemContentStr += `</ul></div>`;
                        return menuItemContentStr;
                    }else {
                        return "";
                    }
                })()}
            </li>
        `);
    });
    menuList.html(htmlArr.join(""));
        }
})
// 尾部
$.ajax({
    url:"../json/common.json",
    success:function(response){
       let htmlStr=[];
       response.footer.forEach(function(obj){
           htmlStr+=`
        <li>
        <img src="${obj.img}">
        <p>${obj.p}</p>
        </li>
        `
       })
       $(".meizu-server").html(htmlStr);
}
})
$.ajax({
    url:"../json/common.json",
    success:function(response){
       let htmlStr=[];
       response.text.forEach(function(obj,index){
          if(index==9){
            htmlStr+=`
            <li>
            <a href="javascript:;">
            <i class="icon-lang-logo icon-lang-logo-cn"></i>
            ${obj.test}</a>
            </li>
            `
          }else{
            htmlStr+=`
            <li>
            <a href="javascript:;">${obj.test}</a>
            </li>
            `
          }
       })
       $(".up-left ul").html(htmlStr);
}
})
// 回到顶部
let offset=0;
$(window).on("scroll",function(){
    offset=this.document.documentElement.scrollTop||this.document.body.scrollTop;
    if(offset>500){
        $(".sidebar").show();

    }else{
        $(".sidebar").hide();
    }
})
$(".side-three").on("click",function(){
    let speed=300;
    $("html").animate({scrollTop:0},speed)
})
if(localStorage.orders){
    // 处理购物车数量
let rootArr = JSON.parse(localStorage.orders);
$('.shop .icon-iconfontcart em').text(rootArr ? rootArr.length : 0);
$('.store-num').text(rootArr ? rootArr.length : 0);
$(".side-one").click(function(){
    location.href="./shopcarts.html"
});
}